"use strict";(self.webpackChunkReactJS_FireSafety=self.webpackChunkReactJS_FireSafety||[]).push([[631],{6100:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(579);const s=function(e){let{isOpen:t,onClose:a,children:s}=e;return t?(0,l.jsx)("div",{className:"modal-overlay",onClick:a,children:(0,l.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("button",{className:"modal-close",onClick:a,children:"\xd7"}),(0,l.jsx)("div",{className:"modal-content",children:s})]})}):null}},4409:(e,t,a)=>{a.d(t,{J:()=>l,a:()=>s});const l="http://109.71.247.179:8000",s="/payment"},9631:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var l=a(5043),s=a(831),r=a(6213),c=a(5245);const n="CartItem_cartItem__DrKen",i="CartItem_itemDetails__OZ7nA",o="CartItem_quantityControl__H-0aB",d="CartItem_removeItemButton__bott0",m="CartItem_itemTotal__ME1da";var u=a(579);const h=e=>{let{item:t}=e;const[a,l]=(0,s.L4)(c.Y),r=e=>{e>0&&l((a=>a.map((a=>a.uniqueKey===t.uniqueKey?{...a,quantity:e}:a))))},h=t.retailPrice||0,g=t.quantity*h>=5e4&&t.wholesalePrice||h;return(0,u.jsxs)("div",{className:n,children:[(0,u.jsx)("img",{src:t.productImage||"https://www.magazin01.ru/upload/iblock/f32/qbz4ezesr4dh1pumjaztiv2zq5zir94b/Bezimeni_7.png",alt:t.name}),(0,u.jsxs)("div",{className:i,children:[(0,u.jsx)("h3",{children:t.name}),(0,u.jsxs)("p",{children:[g.toFixed(2)," \u0440\u0443\u0431./\u0448\u0442"]}),(0,u.jsxs)("div",{className:o,children:[(0,u.jsx)("button",{onClick:()=>r(t.quantity-1),disabled:t.quantity<=1,children:"-"}),(0,u.jsx)("input",{type:"number",value:t.quantity,onChange:e=>{const a=parseInt(e.target.value,10);!isNaN(a)&&a>0&&l((e=>e.map((e=>e.uniqueKey===t.uniqueKey?{...e,quantity:a}:e))))},min:"1"}),(0,u.jsx)("button",{onClick:()=>r(t.quantity+1),children:"+"})]}),(0,u.jsx)("button",{className:d,onClick:()=>{l((e=>e.filter((e=>e.uniqueKey!==t.uniqueKey))))},children:"\xd7"})]}),(0,u.jsxs)("div",{className:m,children:[(g*t.quantity).toFixed(2)," \u0440\u0443\u0431."]})]})},g="Cart_cart__J1-6c",p="Cart_emptyCart__neeJu",x="Cart_emptyCartIcon__JefUk",v="Cart_continueShopping__+PYX3",j="Cart_cartActions__jdSQ1",_="Cart_clearCartButton__1a4kn",S="Cart_cartItems__aoJ-N",y="Cart_cartSummary__dSQEp",N="Cart_formFields__NvW46",I="Cart_formField__r42qG",C="Cart_invalidField__hLfnx",f="Cart_errorMessage__Jn7BI",b="Cart_checkoutButton__esN7R",q="Cart_modal_actions__HyCM4",k="Cart_button_cart__osoQs",w="Cart_clientTypeSelector__6Iuee",F="Cart_active__mO-Tl";var A=a(5475),J=a(4409),z=a(2073),B=a(6100);const K=()=>{const[e,t]=(0,s.L4)(c.Y),[a,n]=(0,l.useState)(""),[i,o]=(0,l.useState)(!0),[d,m]=(0,l.useState)(""),[K,O]=(0,l.useState)(""),[P,H]=(0,l.useState)(""),[M,U]=(0,l.useState)(""),[E,R]=(0,l.useState)(""),[T,Y]=(0,l.useState)(!0),[D,L]=(0,l.useState)(!1),[Q,$]=(0,l.useState)(""),[G,W]=(0,l.useState)(null),[X,Z]=(0,l.useState)(!1),[V,ee]=(0,l.useState)("physical"),[te,ae]=(0,l.useState)(""),le=()=>Z(!1);(0,l.useEffect)((()=>{const e=localStorage.getItem("cart");e&&t(JSON.parse(e));const a=localStorage.getItem("email"),l=localStorage.getItem("firstName"),s=localStorage.getItem("lastName"),r=localStorage.getItem("patronymic"),c=localStorage.getItem("deliveryAddress"),i=localStorage.getItem("phone"),d=localStorage.getItem("clientType"),u=localStorage.getItem("inn");a&&(n(a),o(ce(a))),d&&ee(d),u&&ae(u),l&&m(l),s&&O(s),r&&H(r),c&&U(c),i&&(R(i),Y(ne(i)));localStorage.getItem("paymentId")&&me()}),[t]);const se=e.reduce(((e,t)=>{const a=t.retailPrice||0;return e+(t.quantity*a>=5e4&&t.wholesalePrice||a)*t.quantity}),0),re=()=>{t([]),localStorage.removeItem("cart"),localStorage.removeItem("orderUuid"),localStorage.removeItem("email"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName"),localStorage.removeItem("patronymic"),localStorage.removeItem("deliveryAddress"),localStorage.removeItem("phone"),localStorage.removeItem("inn")},ce=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),ne=e=>/^(\+7|8)\d{10}$/.test(e),ie=async()=>{if(i&&a&&d&&K&&M&&T&&E){L(!0),$("");try{let e=(0,z.A)();localStorage.setItem("orderUuid",e);const t=await r.A.post("".concat(J.J).concat(J.a,"/").concat(e),{amount:{currency:"RUB",value:se.toFixed(2)},description:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u0430 ".concat(e)}),a=t.data.id;localStorage.setItem("paymentId",a),window.location.href=t.data.confirmation.confirmation_url}catch(Q){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:",Q),$("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430")}finally{L(!1)}}else $("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e")},[oe,de]=(0,l.useState)(!1),me=async()=>{var t;const a=localStorage.getItem("paymentId"),l=localStorage.getItem("email"),s=localStorage.getItem("firstName"),c=localStorage.getItem("lastName"),n=localStorage.getItem("patronymic"),i=localStorage.getItem("deliveryAddress"),o=localStorage.getItem("phone"),d=null!==(t=localStorage.getItem("inn"))&&void 0!==t?t:"-";if(a){L(!0),$("");try{const t=await r.A.get("".concat(J.J).concat(J.a,"/").concat(a));W(t.data.status),"succeeded"!==t.data.status||oe||(de(!0),await ue(l,s,c,n,i,o,d,e),re())}catch(Q){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u043a\u0430\u0437\u0430:",Q),$("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u043a\u0430\u0437\u0430")}finally{L(!1)}}else $("ID \u043f\u043b\u0430\u0442\u0435\u0436\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")},ue=async(e,t,a,l,s,c,n,i)=>{const o={recipient_email:e,subject:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430",items:i.map((e=>({name:e.name,cost:e.retailPrice||e.wholesalePrice||0,count:e.quantity}))),firstname:t,surname:a,patronymic:l,address:s,phone:c,inn:n};try{await r.A.post("".concat(J.J,"/mailing/send-email/"),o)}catch(Q){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430:",Q)}finally{localStorage.removeItem("paymentId")}};return"succeeded"===G?(0,u.jsxs)("div",{className:g,children:[(0,u.jsx)("h2",{children:"\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u043f\u043b\u0430\u0447\u0435\u043d"}),(0,u.jsx)("p",{children:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0432\u0430\u0448 \u0437\u0430\u043a\u0430\u0437! \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043d\u0430 \u0432\u0430\u0448 email."}),(0,u.jsx)(A.N_,{to:"/catalog",className:v,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433"})]}):(0,u.jsxs)("div",{className:g,children:[(0,u.jsx)("h2",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),0===e.length?(0,u.jsxs)("div",{className:p,children:[(0,u.jsx)("div",{className:x,children:(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"80",height:"80",children:(0,u.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0020 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"})})}),(0,u.jsx)("p",{children:"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"}),(0,u.jsx)(A.N_,{to:"/catalog",className:v,children:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0437\u0434\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u043a\u0438"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:j,children:(0,u.jsx)("button",{className:_,onClick:re,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})}),(0,u.jsx)("div",{className:S,children:e.map((e=>(0,u.jsx)(h,{item:e},e.uniqueKey)))}),(0,u.jsxs)("div",{className:y,children:[(0,u.jsx)("span",{children:"\u0418\u0442\u043e\u0433\u043e:"}),(0,u.jsxs)("span",{children:[se.toFixed(2)," \u0440\u0443\u0431."]})]}),(0,u.jsxs)("div",{className:w,children:[(0,u.jsx)("button",{type:"button",className:"physical"===V?F:"",onClick:()=>ee("physical"),children:"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043b\u0438\u0446\u043e"}),(0,u.jsx)("button",{type:"button",className:"legal"===V?F:"",onClick:()=>ee("legal"),children:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043b\u0438\u0446\u043e"})]}),(0,u.jsxs)("div",{className:N,children:[(0,u.jsxs)("div",{className:I,children:[(0,u.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,u.jsx)("input",{type:"email",id:"email",value:a,onChange:e=>{const t=e.target.value;n(t),o(ce(t)),localStorage.setItem("email",t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email \u0434\u043b\u044f \u0447\u0435\u043a\u0430",className:i?"":C}),!i&&(0,u.jsx)("span",{className:f,children:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"})]})," ","legal"===V&&(0,u.jsxs)("div",{className:I,children:[(0,u.jsx)("label",{htmlFor:"inn",children:"\u0418\u041d\u041d:"}),(0,u.jsx)("input",{type:"text",id:"inn",value:te,onChange:e=>{ae(e.target.value),localStorage.setItem("inn",e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u041d\u041d",required:!0})]}),(0,u.jsxs)("div",{className:I,children:[(0,u.jsx)("label",{htmlFor:"firstName",children:"\u0418\u043c\u044f:"}),(0,u.jsx)("input",{type:"text",id:"firstName",value:d,onChange:e=>{m(e.target.value),localStorage.setItem("firstName",e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",required:!0})]}),(0,u.jsxs)("div",{className:I,children:[(0,u.jsx)("label",{htmlFor:"lastName",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),(0,u.jsx)("input",{type:"text",id:"lastName",value:K,onChange:e=>{O(e.target.value),localStorage.setItem("lastName",e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",required:!0})]}),(0,u.jsxs)("div",{className:I,children:[(0,u.jsx)("label",{htmlFor:"patronymic",children:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e:"}),(0,u.jsx)("input",{type:"text",id:"patronymic",value:P,onChange:e=>{H(e.target.value),localStorage.setItem("patronymic",e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"})]}),(0,u.jsxs)("div",{className:I,children:[(0,u.jsx)("label",{htmlFor:"deliveryAddress",children:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438:"}),(0,u.jsxs)("select",{id:"deliveryAddress",value:M,onChange:e=>{U(e.target.value),localStorage.setItem("deliveryAddress",e.target.value)},required:!0,children:[(0,u.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0443\u043d\u043a\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"}),(0,u.jsx)("option",{value:"\u041f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438 \u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u0434\u044b, \u0443\u043b. \u041d\u043e\u0432\u043e\u0441\u0451\u043b\u043e\u0432, 9\u0410",children:"\u041f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438 \u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u0434\u044b, \u0443\u043b. \u041d\u043e\u0432\u043e\u0441\u0451\u043b\u043e\u0432, 9\u0410"}),(0,u.jsx)("option",{value:"\u041f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438 \u041f\u044f\u0442\u0438\u0433\u043e\u0440\u0441\u043a, \u0443\u043b. \u0423\u043a\u0440\u0430\u0438\u043d\u0441\u043a\u0430\u044f, 34",children:"\u041f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438 \u041f\u044f\u0442\u0438\u0433\u043e\u0440\u0441\u043a, \u0443\u043b. \u0423\u043a\u0440\u0430\u0438\u043d\u0441\u043a\u0430\u044f, 34"}),(0,u.jsx)("option",{value:"\u0433. \u0415\u0441\u0441\u0435\u043d\u0442\u0443\u043a\u0438, \u0443\u043b. \u0421\u043e\u0432\u0435\u0442\u0441\u043a\u0430\u044f, 67\u0410",children:"\u0433. \u0415\u0441\u0441\u0435\u043d\u0442\u0443\u043a\u0438, \u0443\u043b. \u0421\u043e\u0432\u0435\u0442\u0441\u043a\u0430\u044f, 67\u0410"})]})]}),(0,u.jsxs)("div",{className:I,children:[(0,u.jsx)("label",{htmlFor:"phone",children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430:"}),(0,u.jsx)("input",{type:"tel",id:"phone",value:E,onChange:e=>{const t=e.target.value.replace(/[^0-9+]/g,"");R(t),Y(ne(t)),localStorage.setItem("phone",t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",className:T?"":C,required:!0}),!T&&(0,u.jsx)("span",{className:f,children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +7 \u0438\u043b\u0438 8 \u0438 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 10 \u0446\u0438\u0444\u0440 \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u0434\u0430"})]})]}),(0,u.jsx)("button",{className:b,onClick:()=>Z(!0),disabled:D||!i||!a||!d||!K||!M||!T||!E,children:D?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043e\u043f\u043b\u0430\u0442\u0435"}),Q&&(0,u.jsx)("div",{className:f,children:Q}),(0,u.jsxs)(B.A,{isOpen:X,onClose:le,children:[(0,u.jsx)("h2",{children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0435 \u043e\u043f\u043b\u0430\u0442\u0443"}),(0,u.jsx)("p",{children:"\u041f\u0435\u0440\u0435\u0434 \u0442\u0435\u043c \u043a\u0430\u043a \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e:"}),(0,u.jsxs)("ul",{children:[(0,u.jsx)("li",{children:"\u0412\u044b \u0432\u0435\u0440\u043d\u0443\u043b\u0438\u0441\u044c \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043a\u043e\u0440\u0437\u0438\u043d\u044b \u043f\u043e\u0441\u043b\u0435 \u043e\u043f\u043b\u0430\u0442\u044b."}),(0,u.jsx)("li",{children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u0441 \u0447\u0435\u043a\u043e\u043c \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 email."})]}),(0,u.jsxs)("div",{className:q,children:[(0,u.jsx)("button",{className:k,onClick:()=>{ie(),le()},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043e\u043f\u043b\u0430\u0442\u0443"}),(0,u.jsx)("button",{className:k,onClick:le,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})]})},O=()=>(0,u.jsx)(K,{})},5245:(e,t,a)=>{a.d(t,{Y:()=>s});var l=a(831);const s=(0,l.eU)({key:"cartState",default:[],effects:[(r="cart",e=>{let{setSelf:t,onSet:a}=e;const s=localStorage.getItem(r);null!=s&&t(JSON.parse(s)),a((e=>{e instanceof l.nO?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(e))}))})]});var r}}]);
//# sourceMappingURL=631.7c0c323a.chunk.js.map