{"version":3,"file":"static/js/135.d11f0515.chunk.js","mappings":"8IAaaA,EAAW,CACtB,CAAEC,KAAM,qGAAsBC,I,mHAC9B,CAAED,KAAM,mIAA2BC,I,iJACnC,CAAED,KAAM,0IAA6BC,I,wJACrC,CAAED,KAAM,6HAA0BC,I,2IAClC,CAAED,KAAM,+NAA4CC,I,6OACpD,CAAED,KAAM,8HAA2BC,I,4IACnC,CAAED,KAAM,wJAAiCC,I,sKACzC,CAAED,KAAM,sMAAuCC,I,oNAC/C,CAAED,KAAM,2JAA+BC,I,yKACvC,CAAED,KAAM,mFAAmBC,I,iGAC3B,CAAED,KAAM,0IAA6BC,I,wJACrC,CAAED,KAAM,gGAAsBC,I,kNCnBhC,MA6DA,EA7DgBC,KACd,MAAM,SAAEC,IAAaC,EAAAA,EAAAA,KACfC,EAAkBC,mBAAmBH,IACpCI,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,OACxCC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,OAC5BG,EAAYC,IAAiBJ,EAAAA,EAAAA,UAAS,OAE7CK,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAOhB,EAAAA,EAASiB,MAAKC,GAAKA,EAAEjB,OAASK,IACvCU,EACFG,MAAMH,EAAKd,KACRkB,MAAKC,GAAYA,EAASC,gBAC1BF,MAAKG,IACJT,EAAcS,GACdC,EAAAA,cAAsB,CAAEF,YAAaC,IAClCH,MAAKK,IACJhB,EAAegB,EAAOC,MAAM,IAE7BC,OAAMC,IACLC,QAAQlB,MAAMiB,GACdhB,EAAS,6JAADkB,OAAiCd,EAAKf,KAAI,MAAA6B,OAAKF,EAAIG,SAAU,GACrE,IAELJ,OAAMC,IACLC,QAAQlB,MAAMiB,GACdhB,EAAS,2IAADkB,OAA8Bd,EAAKf,KAAI,MAAA6B,OAAKF,EAAIG,SAAU,IAGtEnB,EAAS,6EACX,GACC,CAACN,IAgBJ,OACE0B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,CACtBvB,IAASwB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,QAAOC,SAAEvB,IACjCH,IACCwB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,UAAQF,UAAU,kBAAkBG,QAnBrBC,KACrB,GAAIxB,EAAY,CACd,MAAMyB,EAAO,IAAIC,KAAK,CAAC1B,GAAa,CAAE2B,KAAM,4EACtCtC,EAAMuC,IAAIC,gBAAgBJ,GAC1BK,EAAIC,SAASC,cAAc,KACjCF,EAAEG,KAAO5C,EACTyC,EAAEI,SAAWzC,EACbsC,SAASI,KAAKC,YAAYN,GAC1BA,EAAEO,QACFN,SAASI,KAAKG,YAAYR,GAC1BF,IAAIW,gBAAgBlD,EACtB,GAQkEgC,SAAC,yEAG7DC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,QAAQoB,wBAAyB,CAAEC,OAAQ9C,UAG1D,C","sources":["data/docs.js","pages/DocPage.jsx"],"sourcesContent":["import Doc1 from './../documents/_заявки Двери.docx';\r\nimport Doc2 from './../documents/_заявки Декларация.docx';\r\nimport Doc3 from './../documents/_заявки Испытание ПК.docx';\r\nimport Doc4 from './../documents/_заявки Категории.docx';\r\nimport Doc5 from './../documents/_заявки Монтаж аварийного освещения.docx';\r\nimport Doc6 from './../documents/_заявки Монтаж ВВП.docx';\r\nimport Doc7 from './../documents/_заявки Монтаж ПС и СОУЭ.docx';\r\nimport Doc8 from './../documents/_заявки Огнезащитная обработка.docx';\r\nimport Doc9 from './../documents/_заявки Проектирование.docx';\r\nimport Doc10 from './../documents/_заявки ПЭ.docx';\r\nimport Doc11 from './../documents/_заявки Расчет риска.docx';\r\nimport Doc12 from './../documents/_заявки ТО ПС.docx';\r\n\r\nexport const DocsList = [\r\n  { name: \"Форма заявки Двери\", url: Doc1 },\r\n  { name: \"Форма заявки Декларация\", url: Doc2 },\r\n  { name: \"Форма заявки Испытание ПК\", url: Doc3 },\r\n  { name: \"Форма заявки Категории\", url: Doc4 },\r\n  { name: \"Форма заявки Монтаж аварийного освещения\", url: Doc5 },\r\n  { name: \"Форма заявки Монтаж ВВП\", url: Doc6 },\r\n  { name: \"Форма заявки Монтаж ПС и СОУЭ\", url: Doc7 },\r\n  { name: \"Форма заявки Огнезащитная обработка\", url: Doc8 },\r\n  { name: \"Форма заявки Проектирование\", url: Doc9 },\r\n  { name: \"Форма заявки ПЭ\", url: Doc10 },\r\n  { name: \"Форма заявки Расчет риска\", url: Doc11 },\r\n  { name: \"Форма заявки ТО ПС\", url: Doc12 },\r\n];\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport mammoth from 'mammoth';\r\nimport { DocsList } from './../data/docs';\r\nimport './DocPage.scss';\r\n\r\nconst DocPage = () => {\r\n  const { fileName } = useParams();\r\n  const decodedFileName = decodeURIComponent(fileName);\r\n  const [htmlContent, setHtmlContent] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [fileBuffer, setFileBuffer] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const file = DocsList.find(f => f.name === decodedFileName);\r\n    if (file) {\r\n      fetch(file.url)\r\n        .then(response => response.arrayBuffer())\r\n        .then(buffer => {\r\n          setFileBuffer(buffer);\r\n          mammoth.convertToHtml({ arrayBuffer: buffer })\r\n            .then(result => {\r\n              setHtmlContent(result.value);\r\n            })\r\n            .catch(err => {\r\n              console.error(err);\r\n              setError(`Ошибка при конвертации файла ${file.name}: ${err.message}`);\r\n            });\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n          setError(`Ошибка при загрузке файла ${file.name}: ${err.message}`);\r\n        });\r\n    } else {\r\n      setError('Файл не найден');\r\n    }\r\n  }, [decodedFileName]);\r\n\r\n  const handleDownload = () => {\r\n    if (fileBuffer) {\r\n      const blob = new Blob([fileBuffer], { type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = decodedFileName;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"doc-page\">\r\n      {error && <div className=\"error\">{error}</div>}\r\n      {htmlContent && (\r\n        <div className=\"paper-container\">\r\n          <button className=\"download-button\" onClick={handleDownload}>\r\n            Скачать файл\r\n          </button>\r\n          <div className=\"paper\" dangerouslySetInnerHTML={{ __html: htmlContent }} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocPage;"],"names":["DocsList","name","url","DocPage","fileName","useParams","decodedFileName","decodeURIComponent","htmlContent","setHtmlContent","useState","error","setError","fileBuffer","setFileBuffer","useEffect","file","find","f","fetch","then","response","arrayBuffer","buffer","mammoth","result","value","catch","err","console","concat","message","_jsxs","className","children","_jsx","onClick","handleDownload","blob","Blob","type","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","dangerouslySetInnerHTML","__html"],"sourceRoot":""}